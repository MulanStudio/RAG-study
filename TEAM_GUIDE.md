# ğŸ›¢ï¸ æ²¹ç”°æœåŠ¡ RAG æ¯”èµ› - å›¢é˜Ÿåˆ†å·¥æŒ‡å—

## å›¢é˜Ÿæ¶æ„ï¼ˆ5äººï¼Œä»»åŠ¡ç‹¬ç«‹å¹¶è¡Œï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        RAG ç³»ç»Ÿæ¶æ„                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                   â”‚
â”‚   â”‚ ğŸ“‚ æ•°æ®å±‚   â”‚ â†â”€â”€ ğŸ‘¤ æˆå‘˜A: æ•°æ®å·¥ç¨‹å¸ˆ                           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     è´Ÿè´£å¤šæ¨¡æ€æ•°æ®åŠ è½½                             â”‚
â”‚          â†“                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                   â”‚
â”‚   â”‚ ğŸ” æ£€ç´¢å±‚   â”‚ â†â”€â”€ ğŸ‘¤ æˆå‘˜B: æ£€ç´¢å·¥ç¨‹å¸ˆ                           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     è´Ÿè´£æ£€ç´¢ç­–ç•¥ä¼˜åŒ–                               â”‚
â”‚          â†“                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                   â”‚
â”‚   â”‚ ğŸ¤– ç”Ÿæˆå±‚   â”‚ â†â”€â”€ ğŸ‘¤ æˆå‘˜C: Prompt å·¥ç¨‹å¸ˆ                        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     è´Ÿè´£ Prompt å’Œç”Ÿæˆä¼˜åŒ–                         â”‚
â”‚          â†“                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                   â”‚
â”‚   â”‚ ğŸ“Š è¯„æµ‹å±‚   â”‚ â†â”€â”€ ğŸ‘¤ æˆå‘˜D: è¯„æµ‹å·¥ç¨‹å¸ˆ                           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     è´Ÿè´£è¯„æµ‹å’Œå‚æ•°è°ƒä¼˜                             â”‚
â”‚          â†“                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                   â”‚
â”‚   â”‚ ğŸ–¥ï¸ ç³»ç»Ÿå±‚   â”‚ â†â”€â”€ ğŸ‘¤ æˆå‘˜E: ç³»ç»Ÿå·¥ç¨‹å¸ˆ                           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     è´Ÿè´£é›†æˆå’Œé…ç½®ç®¡ç†                             â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ‘¤ æˆå‘˜Aï¼šæ•°æ®å·¥ç¨‹å¸ˆï¼ˆData Engineerï¼‰

### è´Ÿè´£æ¨¡å—
```
src/member_a_data/
â”œâ”€â”€ loaders/                # å¤šæ¨¡æ€æ•°æ®åŠ è½½ (PDF/Excel/Word/MD/PPT/Images)
â””â”€â”€ pdf_table_extractor.py
```

### æ ¸å¿ƒä»»åŠ¡
1. **ä¼˜åŒ–æ•°æ®è§£æ**ï¼šç¡®ä¿å„ç±»æ–‡ä»¶æ ¼å¼æ­£ç¡®è§£æ
2. **è¡¨æ ¼æå–**ï¼šPDF/Excel è¡¨æ ¼è½¬ç»“æ„åŒ–æ–‡æœ¬
3. **å›¾ç‰‡ç†è§£**ï¼šè°ƒç”¨ VLM ç”Ÿæˆå›¾ç‰‡æè¿°
4. **è¯­ä¹‰å¢å¼º**ï¼šç»™æ–‡æ¡£æ·»åŠ å…ƒæ•°æ®æ ‡ç­¾

### å…³é”®æŒ‡æ ‡
- æ•°æ®åŠ è½½æˆåŠŸç‡ > 99%
- è¡¨æ ¼ç»“æ„ä¿ç•™ç‡
- å›¾ç‰‡æè¿°è´¨é‡

### å·¥ä½œæ¥å£
```python
# å…¶ä»–æˆå‘˜è°ƒç”¨ä½ çš„ä»£ç 
from src.loaders import load_all_documents
docs = load_all_documents("data/")  # è¿”å› List[Document]
```

---

## ğŸ‘¤ æˆå‘˜Bï¼šæ£€ç´¢å·¥ç¨‹å¸ˆï¼ˆRetrieval Engineerï¼‰

### è´Ÿè´£æ¨¡å—
```
src/member_b_retrieval/
â”œâ”€â”€ retrieval/
â”œâ”€â”€ rrf_fusion.py
â”œâ”€â”€ hyde_retrieval.py
â”œâ”€â”€ query_decomposition.py
â””â”€â”€ text_processing.py
```

### æ ¸å¿ƒä»»åŠ¡
1. **æ··åˆæ£€ç´¢ç­–ç•¥**ï¼šå‘é‡ + BM25 + HyDE
2. **åˆ†ç»„å¬å›**ï¼šæŒ‰æ–‡æ¡£ç±»å‹åˆ†ç»„æ£€ç´¢
3. **RRF èåˆ**ï¼šç§‘å­¦èåˆå¤šè·¯ç»“æœ
4. **é‡æ’åºä¼˜åŒ–**ï¼šè°ƒæ•´ Reranker å‚æ•°

### å…³é”®æŒ‡æ ‡
- Recall@10ï¼ˆå¬å›ç‡ï¼‰
- MRRï¼ˆå¹³å‡å€’æ•°æ’åï¼‰
- æ£€ç´¢å»¶è¿Ÿ < 2s

### å·¥ä½œæ¥å£
```python
# å…¶ä»–æˆå‘˜è°ƒç”¨ä½ çš„ä»£ç 
from src.retrieval import retrieve_documents
docs = retrieve_documents(query, top_k=5)  # è¿”å›æœ€ç›¸å…³çš„æ–‡æ¡£
```

---

## ğŸ‘¤ æˆå‘˜Cï¼šPrompt å·¥ç¨‹å¸ˆï¼ˆPrompt Engineerï¼‰

### è´Ÿè´£æ¨¡å—
```
src/member_c_generation/
â””â”€â”€ generation/             # Prompt/CRAG/å›ç­”æ ¼å¼ä¸é€‰æ‹©é¢˜è§„èŒƒ
```

### æ ¸å¿ƒä»»åŠ¡
1. **Prompt ä¼˜åŒ–**ï¼šé’ˆå¯¹ AI è¯„åˆ†ä¼˜åŒ– Prompt
2. **CRAG å®ç°**ï¼šæ£€ç´¢è´¨é‡è¯„ä¼° + æŸ¥è¯¢é‡å†™
3. **ç­”æ¡ˆæ ¼å¼åŒ–**ï¼šç¡®ä¿è¾“å‡ºæ ¼å¼ç¬¦åˆè¯„åˆ†æ ‡å‡†
4. **å¤šè¯­è¨€æ”¯æŒ**ï¼šä¸­è‹±æ–‡é—®ç­”

### å…³é”®æŒ‡æ ‡
- ç­”æ¡ˆå‡†ç¡®ç‡
- ç­”æ¡ˆå®Œæ•´åº¦
- æ ¼å¼è§„èŒƒæ€§

### å·¥ä½œæ¥å£
```python
# å…¶ä»–æˆå‘˜è°ƒç”¨ä½ çš„ä»£ç 
from src.generation import generate_answer
answer = generate_answer(query, context_docs, llm)
```

### Prompt æ¨¡æ¿ç¤ºä¾‹
```yaml
# config/prompts.yaml
generation:
  system: |
    You are a Senior Oil & Gas Technical Expert.
    Answer based ONLY on the provided context.
    If unsure, say "I don't have enough information."
    
  format: |
    Structure your answer:
    1. Direct answer to the question
    2. Supporting evidence from context
    3. Key data points (if applicable)
```

---

## ğŸ‘¤ æˆå‘˜Dï¼šè¯„æµ‹å·¥ç¨‹å¸ˆï¼ˆEvaluation Engineerï¼‰

### è´Ÿè´£æ¨¡å—
```
src/member_d_evaluation/
â”œâ”€â”€ rag_eval.py             # é—®é¢˜+æ ‡å‡†ç­”æ¡ˆ+æäº¤ç­”æ¡ˆè¯„åˆ†
â””â”€â”€ benchmark_challenge.py  # å†å²è¯„æµ‹è„šæœ¬
```

### æ ¸å¿ƒä»»åŠ¡
1. **æ„å»ºæµ‹è¯•é›†**ï¼šæ”¶é›†å„ç±»é—®é¢˜çš„æµ‹è¯•ç”¨ä¾‹
2. **è¯„æµ‹æŒ‡æ ‡**ï¼šå®ç°å¤šç»´åº¦è¯„åˆ†
3. **A/B æµ‹è¯•**ï¼šå¯¹æ¯”ä¸åŒé…ç½®çš„æ•ˆæœ
4. **é”™è¯¯åˆ†æ**ï¼šåˆ†æå¤±è´¥ caseï¼Œåé¦ˆç»™å…¶ä»–æˆå‘˜

### å…³é”®æŒ‡æ ‡
- æµ‹è¯•è¦†ç›–ç‡
- å„ç±»é—®é¢˜å‡†ç¡®ç‡
- è¯„æµ‹æ•ˆç‡

### å·¥ä½œæ¥å£
```python
# è¿è¡Œè¯„æµ‹
python benchmark.py --config config/config.yaml

# è¾“å‡ºæŠ¥å‘Š
{
  "overall_score": 8.5,
  "by_category": {
    "financial": 9.0,
    "technical": 8.2,
    "image": 7.8
  },
  "failed_cases": [...]
}
```

---

## ğŸ‘¤ æˆå‘˜Eï¼šç³»ç»Ÿå·¥ç¨‹å¸ˆï¼ˆSystem Engineerï¼‰

### è´Ÿè´£æ¨¡å—
```
src/member_e_system/
â”œâ”€â”€ app.py                   # ä¸»åº”ç”¨å…¥å£
â”œâ”€â”€ batch_answer_excel.py    # Excel æ‰¹é‡é—®ç­”
â””â”€â”€ azure_openai_client.py   # Azure OpenAI é€‚é…
config/config.yaml           # ç»Ÿä¸€é…ç½®
README.md                    # ä½¿ç”¨æ–‡æ¡£
```

### æ ¸å¿ƒä»»åŠ¡
1. **ç³»ç»Ÿé›†æˆ**ï¼šæ•´åˆå„æ¨¡å—
2. **é…ç½®ç®¡ç†**ï¼šç»Ÿä¸€ç®¡ç†æ‰€æœ‰å‚æ•°
3. **ç¯å¢ƒæ­å»º**ï¼šç¡®ä¿å„æˆå‘˜ç¯å¢ƒä¸€è‡´
4. **æ–‡æ¡£ç¼–å†™**ï¼šä½¿ç”¨è¯´æ˜ã€API æ–‡æ¡£

### å…³é”®æŒ‡æ ‡
- ç³»ç»Ÿç¨³å®šæ€§
- ä¸€é”®éƒ¨ç½²æˆåŠŸç‡
- é…ç½®çµæ´»æ€§

### å·¥ä½œæ¥å£
```bash
# ä¸€é”®è¿è¡Œ
./scripts/run.sh

# æˆ–
python app.py --data_dir data/ --config config/config.yaml
```

---

## ğŸ“… åä½œæµç¨‹

### ç¬¬ä¸€é˜¶æ®µï¼šç‹¬ç«‹å¼€å‘ï¼ˆå¹¶è¡Œï¼‰
```
Day 1-3:
  æˆå‘˜A: å®Œæˆæ•°æ®åŠ è½½æ¨¡å—
  æˆå‘˜B: å®Œæˆæ£€ç´¢æ¨¡å—
  æˆå‘˜C: å®Œæˆç”Ÿæˆæ¨¡å—
  æˆå‘˜D: å‡†å¤‡æµ‹è¯•ç”¨ä¾‹
  æˆå‘˜E: æ­å»ºé¡¹ç›®æ¡†æ¶
```

### ç¬¬äºŒé˜¶æ®µï¼šé›†æˆæµ‹è¯•
```
Day 4-5:
  æˆå‘˜E: é›†æˆå„æ¨¡å—
  æˆå‘˜D: è¿è¡Œè¯„æµ‹
  å…¨å‘˜: æ ¹æ®è¯„æµ‹ç»“æœä¼˜åŒ–å„è‡ªæ¨¡å—
```

### ç¬¬ä¸‰é˜¶æ®µï¼šè°ƒä¼˜å†²åˆº
```
Day 6-7:
  æˆå‘˜D: åˆ†æé”™é¢˜ï¼Œåˆ†é…ç»™ç›¸å…³æˆå‘˜
  å…¨å‘˜: é’ˆå¯¹æ€§ä¼˜åŒ–
  æˆå‘˜E: æœ€ç»ˆé›†æˆï¼Œå‡†å¤‡æäº¤
```

---

## ğŸ”§ Git åä½œè§„èŒƒ

```bash
# åˆ†æ”¯ç­–ç•¥
main          # ç¨³å®šç‰ˆæœ¬
â”œâ”€â”€ dev       # å¼€å‘åˆ†æ”¯
â”œâ”€â”€ feat/loader    # æˆå‘˜A
â”œâ”€â”€ feat/retrieval # æˆå‘˜B
â”œâ”€â”€ feat/generation # æˆå‘˜C
â”œâ”€â”€ feat/evaluation # æˆå‘˜D
â””â”€â”€ feat/system     # æˆå‘˜E

# åˆå¹¶æµç¨‹
1. å„æˆå‘˜åœ¨è‡ªå·±çš„ feat/ åˆ†æ”¯å¼€å‘
2. å®Œæˆå PR åˆ° dev åˆ†æ”¯
3. æˆå‘˜E è´Ÿè´£ code review å’Œåˆå¹¶
4. æµ‹è¯•é€šè¿‡ååˆå¹¶åˆ° main
```

---

## ğŸ“ æ²Ÿé€šæœºåˆ¶

1. **æ¯æ—¥ç«™ä¼š**ï¼ˆ15åˆ†é’Ÿï¼‰
   - æ˜¨å¤©å®Œæˆäº†ä»€ä¹ˆ
   - ä»Šå¤©è®¡åˆ’åšä»€ä¹ˆ
   - æœ‰ä»€ä¹ˆé˜»å¡

2. **æ¥å£çº¦å®š**
   - å„æ¨¡å—çš„è¾“å…¥è¾“å‡ºæ ¼å¼æå‰çº¦å®š
   - å˜æ›´æ¥å£éœ€é€šçŸ¥ç›¸å…³æˆå‘˜

3. **å…±äº«æ–‡æ¡£**
   - é”™é¢˜æœ¬ï¼šè®°å½•å¤±è´¥ case å’ŒåŸå› 
   - ä¼˜åŒ–æ—¥å¿—ï¼šè®°å½•æ¯æ¬¡ä¼˜åŒ–çš„æ•ˆæœ
